{% extends "layout.html" %}

{% block content %}
<div class="content-section">

<h1>Search Recipes</h1>

<form method="post">
    <div class="form-group">
        <input type="text" class="form-control" id="search_for" name="search_for"
            placeholder="Search by recipe name or ingredient">
    </div>
    <button type="submit" class="btn btn-outline-info mb-4 mr-3">Search</button>
    Clear 
</form>

{% if recipe_results %}
    <h2>Results</h2>for {{ recipe_results }} 
{% elif recipes %}

    <div class="row row-cols-2 row-cols-md-2 row-cols-lg-4">
        {% for recipe in recipes %}
        <div class="col px-2"><!--<div class="col-sm-3 d-flex align-items-stretch"></div><div class="col-md-3">     col-lg-4 col-md-6 col-sm-12-->
            <div class=" card  mb-3 ">
                <div class="card-img-container">
                    <a href="/recipes/{{ recipe.recipe_id }}">
                        <img src="{{ url_for('static', filename='recipe_images/' + recipe.image_file) }}" class="card-img-top"
                        alt="{{ recipe.name }}" >
                        <div class="card-img-content">
                            <p class="card-text mt-auto">
                                {% if recipe.source_url %}
                                  {{ recipe.source_url_short | truncate(30) }}
                                {% else %}
                                  No source URL available
                                {% endif %}
                              </p>
                        </div>              
                </div>
                    <div class="card-body">
                        <h5 class="card-title  recipe-card-title">{{ recipe.name }}</a></h5>
                        <div class="text-secondary">
                            <i class="fa-regular fa-clock mr-1"></i>{{recipe.total_time}} 
                            <i class="fa-solid fa-people-group ml-3 mr-1"></i>{{recipe.servings}}
                            <i class="fa-solid fa-lemon ml-3 mr-1" alt="Ingredients"></i>{{recipe.ingredient_count}}
                        </div>
                    </div>
            </a>
                </div>

        </div>
        {% endfor %}
    </div>
{% endif %}

</div>

{% endblock %}